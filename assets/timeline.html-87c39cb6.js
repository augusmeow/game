import{d as g,b as A,p as u}from"./utils-9fd45833.js";import{W as R}from"./wish-39e7899b.js";import{C as b}from"./characters-46a86da3.js";import"./zh-50a96649.js";import{p as S}from"./eventHandle-4c9d9888.js";import{_ as C,p as o,q as r,R as _,Q as t,t as L,O as h,P as f,x as d,v as a,w as D,aa as N,ab as E,c as P,N as k,z as U}from"./framework-caf2ffc0.js";g.locale("zh");const Y={denro:"#98e628",geo:"#e2b032",electro:"#d296fc",hydro:"#03ddfe",pyro:"#fa5d3e",anemo:"#57dcb0",cryo:"#84c2e6"},W=40;let j=g();const m=S();let y=m.firstDay,v=m.events[0],x=m.events[1],z=v.length,O=x.length,V=m.dates,B=m.monthList,p="",T=[],I=[];const G=()=>{p=Math.abs(y.diff(j,"day",!0)),p=(p+1)*(W+1)+"px"};G();const M=()=>{for(let i=0;i<z;++i){let l=y;const c=u(v[i].start).subtract(0,"minute");T.push(c.diff(l,"day",!0))}};M();const q=()=>{for(let i=0;i<O;++i){let l=y;const c=u(x[i].start).subtract(0,"minute");I.push(c.diff(l,"day",!0))}};q();const F={name:"GenshinTimeline",data(){return{monthList:B,dates:V,DUR_DAY_WIDTH:W,todayOffset:p,currentTime:new Date,WISH:R,CHARACTER:b,durationCharacter:T,durationWeapon:I,wishCharacters:v,wishWeapons:x,colorMap:Y,ElementString:A}},mounted(){let i=this;this.timer1=setInterval(()=>{i.currentTime=g().format("HH:mm:ss")},1e3),this.$refs.setNowPos.scrollLeft=this.$refs.findNowPos.offsetLeft-document.body.clientWidth/2},methods:{setCurrentPos(){this.$refs.setNowPos.scrollLeft=this.$refs.findNowPos.offsetLeft-document.body.clientWidth/2},diffWishStyle(i,l){return u(l).subtract(0,"minute").diff(u(i).subtract(0,"minute"),"hour",!0)<1}},beforeDestroy(){this.timer1&&clearInterval(this.timer1)}},H=i=>(N("data-v-eec58f17"),i=i(),E(),i),Q={class:"hide-on-small-only"},J={style:{textAlign:"center"}},K={class:"timeline-scroll-x",ref:"setNowPos"},X={class:"timeline-month"},Z={class:"timeline-month-text"},$={class:"timeline-day"},ee={class:"timeline-today-line-pos-text"},te={class:"timeline-wish-event-weapon"},se={class:"card-image waves-effect waves-block waves-light",style:{height:"100%"}},ie={class:"event-img"},ne=["src"],oe=H(()=>t("span",{class:"left-align timeline-character-text sticky text-shadow-weapon"}," 「神铸赋形」活动祈愿 ",-1)),re={class:"timeline-wish-event-character"},le={class:"card-image waves-effect waves-block waves-light",style:{height:"100%"}},ae={class:"event-img responsive-img lazy"},ce=["src"],he={class:"timeline-day-index"},de={class:"timeline-week-index"},_e=H(()=>t("div",{class:"hide-on-large-only"},[_(" <h2>请在电脑端查看此页</h2> ")],-1));function me(i,l,c,ue,e,w){return o(),r(h,null,[_("时间轴 电脑版"),t("div",Q,[t("p",J,[L(" 也许有未实装、未确定的虚假信息 "),t("a",{onClick:l[0]||(l[0]=s=>w.setCurrentPos())},"回到当前时间")]),t("div",K,[t("div",X,[(o(!0),r(h,null,f(e.monthList,(s,n)=>(o(),r("div",null,[_(" +1 min-width: 1px "),t("div",{style:d({width:(e.DUR_DAY_WIDTH+1)*s[1].total+"px"})},[t("span",Z,a(s[0]),1)],4)]))),256))]),t("div",$,[t("div",{style:d({left:e.todayOffset}),class:"timeline-today-line-pos",ref:"findNowPos"},[t("div",ee,a(e.currentTime),1)],4),t("div",te,[(o(!0),r(h,null,f(e.WISH.weapons,(s,n)=>(o(),r("div",{class:"card event-item weapon",style:d({width:e.wishWeapons[n].duration*(e.DUR_DAY_WIDTH+1)+"px",left:(e.durationWeapon[n]+1)*(e.DUR_DAY_WIDTH+1)+"px",height:"var(--event-height)"})},[t("div",se,[t("div",ie,[t("img",{src:"/image/genshin/wish/"+s.name.concat("_"+s.image+".jpg").toLowerCase().replace(/ /g,"_"),alt:""},null,8,ne)]),oe])],4))),256))]),_(" dur day +1 cause line width is 1 px "),_(" duration + 1 cause 从左边开始计算的  "),t("div",re,[(o(!0),r(h,null,f(e.WISH.characters,(s,n)=>(o(),r("div",{class:D(["card event-item",["ele-"+e.ElementString[e.CHARACTER[s.wish5star].ele],n>0&&w.diffWishStyle(e.WISH.characters[n-1].end,s.start)?"":"rounded-l-xl",n<e.WISH.characters.length-1&&w.diffWishStyle(s.end,e.WISH.characters[n+1].start)?"border-r-4 border-white":"rounded-r-xl"]]),style:d({width:e.wishCharacters[n].duration*(e.DUR_DAY_WIDTH+1)+"px",left:(e.durationCharacter[n]+1)*(e.DUR_DAY_WIDTH+1)+"px",marginTop:s.wish_2?"68px":""})},[t("div",le,[t("div",ae,[t("img",{src:"/image/genshin/wish/"+s.name.concat("_"+s.image+".jpg").toLowerCase().replace(/ /g,"_"),alt:""},null,8,ce)]),t("span",{class:D(["left-align timeline-character-text sticky","ele-text-shadow-"+e.ElementString[e.CHARACTER[s.wish5star].ele]])},a(s.wishName)+" 活动祈愿 「"+a(e.CHARACTER[s.wish5star].prefix)+"」 "+a(e.CHARACTER[s.wish5star].name),3)])],6))),256))]),(o(!0),r(h,null,f(e.dates,(s,n)=>(o(),r("div",{style:d({marginLeft:e.DUR_DAY_WIDTH}),class:"timeline-wrapper"},[t("span",he,a(s[0]),1),t("span",de,a(s[1]),1)],4))),256))])],512)]),_e],64)}const fe=C(F,[["render",me],["__scopeId","data-v-eec58f17"],["__file","Timeline.vue"]]),pe=P({__name:"timeline.html",setup(i){return(l,c)=>(o(),r("div",null,[k(U(fe))]))}}),Ce=C(pe,[["__file","timeline.html.vue"]]);export{Ce as default};
